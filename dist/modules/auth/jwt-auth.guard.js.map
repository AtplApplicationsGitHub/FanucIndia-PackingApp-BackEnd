{"version":3,"sources":["../../../src/modules/auth/jwt-auth.guard.ts"],"sourcesContent":["import { ExecutionContext, Injectable } from '@nestjs/common';\r\nimport { AuthGuard } from '@nestjs/passport';\r\nimport { Reflector } from '@nestjs/core';\r\nimport { IS_PUBLIC_KEY } from './public.decorator';\r\n\r\n@Injectable()\r\nexport class JwtAuthGuard extends AuthGuard('jwt') {\r\n  constructor(private reflector: Reflector) {\r\n    super();\r\n  }\r\n\r\n  canActivate(context: ExecutionContext) {\r\n    const isPublic = this.reflector.getAllAndOverride<boolean>(IS_PUBLIC_KEY, [\r\n      context.getHandler(),\r\n      context.getClass(),\r\n    ]);\r\n    if (isPublic) return true;\r\n    return super.canActivate(context);\r\n  }\r\n}\r\n"],"names":["JwtAuthGuard","AuthGuard","canActivate","context","isPublic","reflector","getAllAndOverride","IS_PUBLIC_KEY","getHandler","getClass"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANgC;0BACnB;sBACA;iCACI;;;;;;;;;;AAGvB,IAAA,AAAMA,eAAN,MAAMA,qBAAqBC,IAAAA,mBAAS,EAAC;IAK1CC,YAAYC,OAAyB,EAAE;QACrC,MAAMC,WAAW,IAAI,CAACC,SAAS,CAACC,iBAAiB,CAAUC,8BAAa,EAAE;YACxEJ,QAAQK,UAAU;YAClBL,QAAQM,QAAQ;SACjB;QACD,IAAIL,UAAU,OAAO;QACrB,OAAO,KAAK,CAACF,YAAYC;IAC3B;IAXA,YAAY,AAAQE,SAAoB,CAAE;QACxC,KAAK,SADaA,YAAAA;IAEpB;AAUF"}