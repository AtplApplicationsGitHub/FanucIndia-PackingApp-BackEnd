{"version":3,"sources":["../../../../src/modules/user/dto/user.dto.ts"],"sourcesContent":["import {\r\n  IsString,\r\n  MinLength,\r\n  IsIn,\r\n  ValidateIf,\r\n  Matches,\r\n  IsOptional,\r\n} from 'class-validator';\r\nimport { ApiProperty, PartialType } from '@nestjs/swagger';\r\n\r\nexport class CreateUserDto {\r\n  @ApiProperty({ example: 'John Doe' })\r\n  @IsString()\r\n  name: string;\r\n\r\n  @ApiProperty({ example: 'john.doe@example.com or johndoe' })\r\n  @IsString()\r\n  email: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Password (min 8 chars for Admin/Sales, 4-digit PIN for User)',\r\n  })\r\n  @IsString()\r\n  @ValidateIf((o) => o.role !== 'USER')\r\n  @MinLength(8, { message: 'Password must be at least 8 characters long' })\r\n  @ValidateIf((o) => o.role === 'USER')\r\n  @Matches(/^\\d{4}$/, {\r\n    message: 'Password must be a 4-digit PIN for the USER role',\r\n  })\r\n  password: string;\r\n\r\n  @ApiProperty({\r\n    example: 'USER',\r\n    enum: ['ADMIN', 'SALES', 'USER'],\r\n  })\r\n  @IsString()\r\n  @IsIn(['ADMIN', 'SALES', 'USER'])\r\n  role: string;\r\n}\r\n\r\nexport class UpdateUserDto extends PartialType(CreateUserDto) {\r\n  @ApiProperty({\r\n    description: 'Optional new password',\r\n    required: false,\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  @ValidateIf((o) => o.role !== 'USER' && o.password)\r\n  @MinLength(8, { message: 'Password must be at least 8 characters long' })\r\n  @ValidateIf((o) => o.role === 'USER' && o.password)\r\n  @Matches(/^\\d{4}$/, {\r\n    message: 'Password must be a 4-digit PIN for the USER role',\r\n  })\r\n  password?: string;\r\n}"],"names":["CreateUserDto","UpdateUserDto","example","description","o","role","message","enum","PartialType","required","password"],"mappings":";;;;;;;;;;;QAUaA;eAAAA;;QA8BAC;eAAAA;;;gCAjCN;yBACkC;;;;;;;;;;AAElC,IAAA,AAAMD,gBAAN,MAAMA;AA4Bb;;;QA3BiBE,SAAS;;;;;;;QAITA,SAAS;;;;;;;QAKtBC,aAAa;;;qCAGFC,IAAMA,EAAEC,IAAI,KAAK;;QACdC,SAAS;;qCACZF,IAAMA,EAAEC,IAAI,KAAK;;QAE5BC,SAAS;;;;;;QAKTJ,SAAS;QACTK,MAAM;YAAC;YAAS;YAAS;SAAO;;;;QAG3B;QAAS;QAAS;;;;AAIpB,IAAA,AAAMN,gBAAN,MAAMA,sBAAsBO,IAAAA,oBAAW,EAACR;AAc/C;;;QAZIG,aAAa;QACbM,UAAU;;;;qCAICL,IAAMA,EAAEC,IAAI,KAAK,UAAUD,EAAEM,QAAQ;;QAClCJ,SAAS;;qCACZF,IAAMA,EAAEC,IAAI,KAAK,UAAUD,EAAEM,QAAQ;;QAEhDJ,SAAS"}