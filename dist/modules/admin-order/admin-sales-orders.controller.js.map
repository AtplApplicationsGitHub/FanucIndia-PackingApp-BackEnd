{"version":3,"sources":["../../../src/modules/admin-order/admin-sales-orders.controller.ts"],"sourcesContent":["import { Controller, Get, Param, NotFoundException, ParseIntPipe, UseGuards } from '@nestjs/common';\r\nimport { PrismaService } from '../../prisma.service';\r\nimport { Roles } from '../auth/roles.decorator';\r\nimport { JwtAuthGuard } from '../auth/jwt-auth.guard';\r\nimport { ApiBearerAuth, ApiOperation, ApiParam, ApiResponse, ApiTags } from '@nestjs/swagger';\r\n\r\n@ApiTags('Admin Orders')\r\n@ApiBearerAuth()\r\n@Controller('admin/sales-orders')\r\n@UseGuards(JwtAuthGuard) \r\nexport class AdminSalesOrdersController {\r\n  constructor(private readonly prisma: PrismaService) {}\r\n\r\n  @Get(':id')\r\n  @Roles('ADMIN')\r\n  @ApiOperation({ summary: 'Get a specific sales order by its ID' })\r\n  @ApiParam({ name: 'id', description: 'The ID of the sales order', type: Number })\r\n  @ApiResponse({ status: 200, description: 'Sales order details returned successfully.' })\r\n  @ApiResponse({ status: 403, description: 'Forbidden. User does not have the required role.' })\r\n  @ApiResponse({ status: 404, description: 'Sales order not found.' })\r\n  async getSalesOrderById(@Param('id', ParseIntPipe) id: number) {\r\n    const order = await this.prisma.salesOrder.findUnique({\r\n      where: { id },\r\n      include: { customer: true },\r\n    });\r\n\r\n    if (!order) {\r\n      throw new NotFoundException('Sales order not found');\r\n    }\r\n\r\n    return order;\r\n  }\r\n}\r\n"],"names":["AdminSalesOrdersController","getSalesOrderById","id","order","prisma","salesOrder","findUnique","where","include","customer","NotFoundException","summary","name","description","type","Number","status"],"mappings":";;;;+BAUaA;;;eAAAA;;;wBAVsE;+BACrD;gCACR;8BACO;yBAC+C;;;;;;;;;;;;;;;AAMrE,IAAA,AAAMA,6BAAN,MAAMA;IAGX,MAOMC,kBAAkB,AAA2BC,EAAU,EAAE;QAC7D,MAAMC,QAAQ,MAAM,IAAI,CAACC,MAAM,CAACC,UAAU,CAACC,UAAU,CAAC;YACpDC,OAAO;gBAAEL;YAAG;YACZM,SAAS;gBAAEC,UAAU;YAAK;QAC5B;QAEA,IAAI,CAACN,OAAO;YACV,MAAM,IAAIO,yBAAiB,CAAC;QAC9B;QAEA,OAAOP;IACT;IApBA,YAAY,AAAiBC,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAqBvD;;;;;QAjBkBO,SAAS;;;QACbC,MAAM;QAAMC,aAAa;QAA6BC,MAAMC;;;QACzDC,QAAQ;QAAKH,aAAa;;;QAC1BG,QAAQ;QAAKH,aAAa;;;QAC1BG,QAAQ;QAAKH,aAAa"}