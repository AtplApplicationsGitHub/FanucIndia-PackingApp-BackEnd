{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core';\r\nimport { AppModule } from './app.module';\r\nimport { AllExceptionsFilter } from './common/all-exceptions.filter';\r\nimport { PinoLogger } from './common/pino-logger.service';\r\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\r\nimport { ValidationPipe } from '@nestjs/common';\r\nimport * as fs from 'fs';\r\nimport { ConfigService } from '@nestjs/config';\r\n\r\nasync function bootstrap() {\r\n  const app = await NestFactory.create(AppModule, { logger: false });\r\n  const configService = app.get(ConfigService);\r\n\r\n  const pinoAdapter = new PinoLogger();\r\n  app.useLogger(pinoAdapter);\r\n\r\n  app.useGlobalPipes(\r\n    new ValidationPipe({\r\n      whitelist: true,\r\n      forbidNonWhitelisted: true,\r\n      transform: true,\r\n    }),\r\n  );\r\n\r\n  const swaggerConfig = new DocumentBuilder()\r\n    .setTitle('Fanuc Packing App API')\r\n    .setDescription('API documentation for Fanuc Packing Web & Mobile App')\r\n    .setVersion('1.0')\r\n    .addBearerAuth()\r\n    .build();\r\n  const document = SwaggerModule.createDocument(app, swaggerConfig);\r\n  SwaggerModule.setup('api', app, document);\r\n\r\n  app.useGlobalFilters(new AllExceptionsFilter());\r\n\r\n  app.enableCors({\r\n    origin: ['http://localhost:3000', 'https://fanuc.goval.app:444'],\r\n    credentials: true,\r\n  });\r\n\r\n  const port = process.env.PORT || 3011;\r\n  await app.listen(port, '0.0.0.0');\r\n  pinoAdapter.log(`Application is listening on port ${port}`, 'bootstrap');\r\n  pinoAdapter.log('Application started', 'bootstrap');\r\n}\r\n\r\nbootstrap();"],"names":["bootstrap","app","NestFactory","create","AppModule","logger","configService","get","ConfigService","pinoAdapter","PinoLogger","useLogger","useGlobalPipes","ValidationPipe","whitelist","forbidNonWhitelisted","transform","swaggerConfig","DocumentBuilder","setTitle","setDescription","setVersion","addBearerAuth","build","document","SwaggerModule","createDocument","setup","useGlobalFilters","AllExceptionsFilter","enableCors","origin","credentials","port","process","env","PORT","listen","log"],"mappings":";;;;sBAA4B;2BACF;qCACU;mCACT;yBACoB;wBAChB;wBAED;AAE9B,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAACC,oBAAS,EAAE;QAAEC,QAAQ;IAAM;IAChE,MAAMC,gBAAgBL,IAAIM,GAAG,CAACC,qBAAa;IAE3C,MAAMC,cAAc,IAAIC,6BAAU;IAClCT,IAAIU,SAAS,CAACF;IAEdR,IAAIW,cAAc,CAChB,IAAIC,sBAAc,CAAC;QACjBC,WAAW;QACXC,sBAAsB;QACtBC,WAAW;IACb;IAGF,MAAMC,gBAAgB,IAAIC,wBAAe,GACtCC,QAAQ,CAAC,yBACTC,cAAc,CAAC,wDACfC,UAAU,CAAC,OACXC,aAAa,GACbC,KAAK;IACR,MAAMC,WAAWC,sBAAa,CAACC,cAAc,CAACzB,KAAKgB;IACnDQ,sBAAa,CAACE,KAAK,CAAC,OAAO1B,KAAKuB;IAEhCvB,IAAI2B,gBAAgB,CAAC,IAAIC,wCAAmB;IAE5C5B,IAAI6B,UAAU,CAAC;QACbC,QAAQ;YAAC;YAAyB;SAA8B;QAChEC,aAAa;IACf;IAEA,MAAMC,OAAOC,QAAQC,GAAG,CAACC,IAAI,IAAI;IACjC,MAAMnC,IAAIoC,MAAM,CAACJ,MAAM;IACvBxB,YAAY6B,GAAG,CAAC,CAAC,iCAAiC,EAAEL,MAAM,EAAE;IAC5DxB,YAAY6B,GAAG,CAAC,uBAAuB;AACzC;AAEAtC"}